<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Transform data to a trace — to_trace • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform data to a trace — to_trace"><meta name="description" content='This function does the opposite of unpack_trace. It
takes in a data.frame and return a trace according to predpeds
requirements. The data.frame should at least have the column names "x", "y",
"time", and "id", containing the coordinates, times at which the data were
gathered (in seconds), and the id-number of the person whose data it is.
Additionally, data.frame needs information on the goals that agents were
trying to achieve at each timepoint, of which their positions should be
saved under "goal_x" and "goal_y", and their id to "goal_id".'><meta property="og:description" content='This function does the opposite of unpack_trace. It
takes in a data.frame and return a trace according to predpeds
requirements. The data.frame should at least have the column names "x", "y",
"time", and "id", containing the coordinates, times at which the data were
gathered (in seconds), and the id-number of the person whose data it is.
Additionally, data.frame needs information on the goals that agents were
trying to achieve at each timepoint, of which their positions should be
saved under "goal_x" and "goal_y", and their id to "goal_id".'><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transform data to a trace</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/data.R"><code>R/data.R</code></a></small>
      <div class="d-none name"><code>to_trace.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function does the opposite of <code><a href="unpack_trace.html">unpack_trace</a></code>. It
takes in a data.frame and return a trace according to <code>predped</code>s
requirements. The data.frame should at least have the column names "x", "y",
"time", and "id", containing the coordinates, times at which the data were
gathered (in seconds), and the id-number of the person whose data it is.
Additionally, data.frame needs information on the goals that agents were
trying to achieve at each timepoint, of which their positions should be
saved under "goal_x" and "goal_y", and their id to "goal_id".</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">to_trace</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">background</span>,</span>
<span>  b_turning <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  a_turning <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  velocities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  orientations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">72.5</span>, <span class="fl">50</span>, <span class="fl">32.5</span>, <span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">32.5</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">72.5</span><span class="op">)</span>,</span>
<span>  time_step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.975</span>, <span class="fl">2</span> <span class="op">*</span> <span class="fl">0.035</span>, <span class="fl">4</span> <span class="op">*</span> <span class="fl">0.035</span><span class="op">^</span><span class="fl">4</span><span class="op">)</span><span class="op">/</span><span class="va">time_step</span>,</span>
<span>  stay_stopped <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cpp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Instance of a data.frame containing the data you want to transform.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Instance of the <code><a href="background-class.html">background-class</a></code>
containing the setting in which the data were gathered.</p></dd>


<dt id="arg-b-turning-a-turning">b_turning, a_turning<a class="anchor" aria-label="anchor" href="#arg-b-turning-a-turning"></a></dt>
<dd><p>Numeric denoting the values of the parameters
\(b\) and \(a\) for the relationship between orientation and velocity.
For more information, see the documentation of
<code><a href="compute_centers.html">compute_centers</a></code>. Defaults to <code>NULL</code>, meaning that
this relationship takes on the default values of <code>predped</code>.</p></dd>


<dt id="arg-velocities">velocities<a class="anchor" aria-label="anchor" href="#arg-velocities"></a></dt>
<dd><p>Numeric vector denoting the changes in speeds as assumed by
the M4MA. Defaults to <code>1.5</code> (acceleration), <code>1</code>, and <code>0.5</code>
(deceleration).</p></dd>


<dt id="arg-orientations">orientations<a class="anchor" aria-label="anchor" href="#arg-orientations"></a></dt>
<dd><p>Numeric vector denoting the changes in orientation as
assumed by the M4MA. Defaults to <code>72.5</code>, <code>50</code>, <code>32.5</code>,
<code>20</code>, <code>10</code>, <code>0</code>, <code>350</code>, <code>340</code>, <code>327.5</code>,
<code>310</code>, <code>287.5</code> (note that the larger angles are actually the
negative symmetric versions of the smaller angles).</p></dd>


<dt id="arg-time-step">time_step<a class="anchor" aria-label="anchor" href="#arg-time-step"></a></dt>
<dd><p>Numeric denoting the time between each iteration. Defaults
to <code>0.5</code> (the same as in <code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code>).</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>Numeric denoting under which observed value for speed the
cell to which an agent has moved should be put to `0`. Defaults to a value
based on the observed measurement error in our system.</p></dd>


<dt id="arg-stay-stopped">stay_stopped<a class="anchor" aria-label="anchor" href="#arg-stay-stopped"></a></dt>
<dd><p>Logical denoting whether agents will predict others that
are currently not moving to remain immobile in the next iteration. Is needed
to compute the utility variables accurately. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-cpp">cpp<a class="anchor" aria-label="anchor" href="#arg-cpp"></a></dt>
<dd><p>Logical denoting whether to use the Rcpp (<code>TRUE</code>) or R
(<code>FALSE</code>) version of this function. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to <code><a href="find_path.html">find_path</a></code>.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This is my example</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

