<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate the M4MA — simulate,predped-method • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate the M4MA — simulate,predped-method"><meta name="description" content="This function allows users to simulate data from their specified
predped-class."><meta property="og:description" content="This function allows users to simulate data from their specified
predped-class."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate the M4MA</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/simulate.R"><code>R/simulate.R</code></a></small>
      <div class="d-none name"><code>simulate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows users to simulate data from their specified
<code><a href="predped-class.html">predped-class</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'predped'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  max_agents <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  iterations <span class="op">=</span> <span class="fl">1800</span>,</span>
<span>  add_agent_after <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">60</span>, <span class="fl">15</span><span class="op">)</span>,</span>
<span>  standing_start <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  initial_agents <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial_condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial_number_agents <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  goal_number <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  goal_duration <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  precompute_goal_paths <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sort_goals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  precomputed_goals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  middle_edge <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  space_between <span class="op">=</span> <span class="fl">1.25</span>,</span>
<span>  time_step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  precompute_edges <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  many_nodes <span class="op">=</span> <span class="va">precompute_edges</span>,</span>
<span>  individual_differences <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span>, nrow <span class="op">=</span> <span class="fl">1</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  fx <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span>,</span>
<span>  cpp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object of the <code><a href="predped-class.html">predped-class</a></code>.</p></dd>


<dt id="arg-max-agents">max_agents<a class="anchor" aria-label="anchor" href="#arg-max-agents"></a></dt>
<dd><p>Numeric, vector, or function that defines the maximal number
of agents at each iteration in the simulation. If a vector, the maximal number
of agents will be different at each iteration, allowing users to specify
peak and off-peak scenarios. It's exact value is handled by
<code><a href="determine_values.html">determine_values</a></code>. Defaults to <code>20</code>.</p></dd>


<dt id="arg-iterations">iterations<a class="anchor" aria-label="anchor" href="#arg-iterations"></a></dt>
<dd><p>Numeric denoting the number of iterations to run the
simulation for. Defaults to <code>1800</code>, which corresponds to 15 minutes of
simulation.</p></dd>


<dt id="arg-add-agent-after">add_agent_after<a class="anchor" aria-label="anchor" href="#arg-add-agent-after"></a></dt>
<dd><p>Numeric, vector, or function that defines the maximal number
of agents at each iteration in the simulation. It's exact value is handled by
<code><a href="determine_values.html">determine_values</a></code>. Defaults to
<code>\(n) rnorm(n, 60, 15)</code> or someone walking in every 30 seconds on
average.</p></dd>


<dt id="arg-standing-start">standing_start<a class="anchor" aria-label="anchor" href="#arg-standing-start"></a></dt>
<dd><p>Numeric denoting the factor of their preferred speed
that agents move when they just came from standing still. Defaults to
<code>0.1</code>.</p></dd>


<dt id="arg-initial-agents">initial_agents<a class="anchor" aria-label="anchor" href="#arg-initial-agents"></a></dt>
<dd><p>List of objects of the <code><a href="agent-class.html">agent-class</a></code>
with which to start the simulation. Defaults to <code>NULL</code>, meaning the
simulation starts with an empty room.</p></dd>


<dt id="arg-initial-condition">initial_condition<a class="anchor" aria-label="anchor" href="#arg-initial-condition"></a></dt>
<dd><p>Object of the <code><a href="state-class.html">state-class</a></code>
containing the initial state at which to start the simulation. Defaults to
<code>NULL</code>, meaning the simulation starts with an empty room. Ignored when
<code>initial_agents</code> or <code>initial_number_agents</code> is provided.</p></dd>


<dt id="arg-initial-number-agents">initial_number_agents<a class="anchor" aria-label="anchor" href="#arg-initial-number-agents"></a></dt>
<dd><p>Numeric denoting the number of agents that
the simulation should start out with. Defaults to <code>NULL</code>, meaning the
simulation should start with no agents in the room. Ignored if
<code>initial_agents</code> is provided.</p></dd>


<dt id="arg-goal-number">goal_number<a class="anchor" aria-label="anchor" href="#arg-goal-number"></a></dt>
<dd><p>Numeric, vector, or function that defines the number of
goals the agents should accomplish. It's exact value is handled by
<code><a href="determine_values.html">determine_values</a></code>. Defaults to <code>\(n) rnorm(n, 10, 2)</code>.</p></dd>


<dt id="arg-goal-duration">goal_duration<a class="anchor" aria-label="anchor" href="#arg-goal-duration"></a></dt>
<dd><p>Numeric, vector, or function that defines the duration of
the goals of the agents. Defaults to <code>\(n) rnorm(n, 10, 2)</code>.</p></dd>


<dt id="arg-precompute-goal-paths">precompute_goal_paths<a class="anchor" aria-label="anchor" href="#arg-precompute-goal-paths"></a></dt>
<dd><p>Logical denoting whether to run the
<code><a href="find_path.html">find_path</a></code> for each of the generated goals
beforehand. Assumes that the agent does all of the goals in the order of the
goal stack. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-sort-goals">sort_goals<a class="anchor" aria-label="anchor" href="#arg-sort-goals"></a></dt>
<dd><p>Logical denoting whether to order the goal stack in a logical
way. Currently implemented in the following way. First, we select the first
goal as being the one that is closest by the starting position provided in
the argument <code>starting_position</code>. Then, we define each of the next goals
as being the one that is closest to the position of the previous goal.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-precomputed-goals">precomputed_goals<a class="anchor" aria-label="anchor" href="#arg-precomputed-goals"></a></dt>
<dd><p>List of goal stacks from which the agent can be
assigned one. Defaults to <code>NULL</code>, triggering the creation of goal stacks
in the simulation.</p></dd>


<dt id="arg-middle-edge">middle_edge<a class="anchor" aria-label="anchor" href="#arg-middle-edge"></a></dt>
<dd><p>Logical denoting whether to sample the goals from the
middle of the edge of the objects in the <code>link[predped]{background-class}</code>
(<code>TRUE</code>) or to allow the goal locations to fall on all points on these
edges (<code>FALSE</code>). Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-space-between">space_between<a class="anchor" aria-label="anchor" href="#arg-space-between"></a></dt>
<dd><p>Numeric denoting the multiplier for the space to leave
between the circumference of the object and the nodes created under the hood
(see <code><a href="add_nodes.html">add_nodes</a></code>). Is multiplied by the agent's radius
to determine the actual space to leave between object and node. Defaults to
<code>2.5</code>.</p></dd>


<dt id="arg-time-step">time_step<a class="anchor" aria-label="anchor" href="#arg-time-step"></a></dt>
<dd><p>Numeric denoting the number of seconds each discrete step in
time should mimic. Defaults to <code>0.5</code>, or half a second.</p></dd>


<dt id="arg-precompute-edges">precompute_edges<a class="anchor" aria-label="anchor" href="#arg-precompute-edges"></a></dt>
<dd><p>Logical denoting whether to precompute the path points
on which agents can move. Defaults to <code>TRUE</code>, triggering the creation
of edges through the <code><a href="compute_edges.html">compute_edges</a></code> function.</p></dd>


<dt id="arg-many-nodes">many_nodes<a class="anchor" aria-label="anchor" href="#arg-many-nodes"></a></dt>
<dd><p>Logical denoting whether to use the minimal amount of path
points necessary for the edges (<code>FALSE</code>) or to use many more <code>TRUE</code>.
Defaults to <code>TRUE</code> if <code>precompute_edges = TRUE</code>, and otherwise
defaults to <code>FALSE</code>. See <code><a href="create_edges.html">create_edges</a></code> for full
disclosure on the effect of this logical.</p></dd>


<dt id="arg-individual-differences">individual_differences<a class="anchor" aria-label="anchor" href="#arg-individual-differences"></a></dt>
<dd><p>Logical denoting whether to use the standard
deviations in the parameter list to create some variation in the parameters.
Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-group-size">group_size<a class="anchor" aria-label="anchor" href="#arg-group-size"></a></dt>
<dd><p>Numeric matrix with two columns where the first column
denotes the number of people in a social group and the second column the
probability with which such a group is added to the simulation. Defaults to
a 100% probability that individuals are added to the simulation (i.e., no
social groups).</p></dd>


<dt id="arg-fx">fx<a class="anchor" aria-label="anchor" href="#arg-fx"></a></dt>
<dd><p>Function that takes in and returns an object of the
<code><a href="state-class.html">state-class</a></code>. This will be executed at the beginning of each
iteration and allows users some flexibility in their simulations. For example
useful when simulating evacuations (giving everyone "goal exit") or trying
to guide behavior in any other way. Defaults to "\(x) x", meaning the state
remains unaltered.</p></dd>


<dt id="arg-cpp">cpp<a class="anchor" aria-label="anchor" href="#arg-cpp"></a></dt>
<dd><p>Logical denoting whether to use the Rcpp (<code>TRUE</code>) or R
(<code>FALSE</code>) versions of the lower-level functions. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to the <code>simulate.state</code>
function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of objects of the <code><a href="state-class.html">state-class</a></code> containing the
result of the simulation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Heavily depends on <code>simulate.state</code> and
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></code>.</p>
<p>The arguments that can be used to influence the simulation behavior might
be overwhelming, which is why we include a small categorization of the
arguments in this sections. Roughly speaking, this function has multiple
arguments that influence a same aspect of the simulation. These are the
following (note that here all arguments are provided; some of these may
only appear in the documentation of <code>simulate.state</code>).</p>
<p>Arguments that directly influence the general characteristics of the
simulation and the model itself.</p><dl><dt><code>max_agent</code>:</dt>
<dd><p>How many agents that can be in the room.</p></dd>

    <dt><code>iterations</code>:</dt>
<dd><p>How long the simulation should last.</p></dd>

    <dt><code>add_agent_after</code>:</dt>
<dd><p>How many iterations to leave between
                                   each agent entering the room.</p></dd>

    <dt><code>time_step</code>:</dt>
<dd><p>How much time passes after each iteration.</p></dd>

    <dt><code>velocities</code>:</dt>
<dd><p>To which extent an agent can change their speed
                              from one iteration to the next.</p></dd>

    <dt><code>orientations</code>:</dt>
<dd><p>To which extent an agent can change their
                                direction from one iteration to the next.</p></dd>

    <dt><code>stay_stopped</code>:</dt>
<dd><p>Whether agents predict currently immobile
                                pedestrians to remain immobile.</p></dd>


</dl><p>Arguments that influence general characteristics of the agents.</p><dl><dt><code>individual_differences</code>:</dt>
<dd><p>Whether agents should have
                                          continuous individual differences.</p></dd>

    <dt><code>standing_start</code>:</dt>
<dd><p>How fast agents are after standing still.</p></dd>


</dl><p>Arguments controlling whether an initial condition should be used.</p><dl><dt><code>initial_agents</code>:</dt>
<dd><p>An initial list of agents.</p></dd>

    <dt><code>initial_number_agents</code>:</dt>
<dd><p>An initial number of agents with
                                         which you want to start the
                                         simulation.</p></dd>

    <dt><code>initial_condition</code>:</dt>
<dd><p>An initial state.</p></dd>


</dl><p>Preferably, only one is used at a time.</p>
<p>Arguments controlling the goals, which can be easily traced back to the
<code><a href="goal_stack.html">goal_stack</a></code> function.</p><dl><dt><code>goal_number</code>:</dt>
<dd><p>The number of goals the agents should have.</p></dd>

    <dt><code>goal_duration</code>:</dt>
<dd><p>How long each goal should take.</p></dd>

    <dt><code>precompute_goal_paths</code>:</dt>
<dd><p>Whether the paths to the goals should
                                         be precomputed.</p></dd>

    <dt><code>sort_goals</code>:</dt>
<dd><p>Whether to sort the goals based on distance.
                              Corresponds to the <code>sort</code> argument in
                              <code><a href="goal_stack.html">goal_stack</a></code>.</p></dd>

    <dt><code>precomputed_goals</code>:</dt>
<dd><p>List of goal stacks that already exist
                                     and which should be assigned to the
                                     agents.</p></dd>


</dl><p>Arguments controlling how path points and edges are handled.</p><dl><dt><code>precomputed_edges</code>:</dt>
<dd><p>List containing nodes and edges.</p></dd>

    <dt><code>many_nodes</code>:</dt>
<dd><p>Whether to have many or few path points.</p></dd>

    <dt><code>space_between</code>:</dt>
<dd><p>Space to leave between objects and nodes.</p></dd>

    <dt><code>close_enough</code>:</dt>
<dd><p>How close a pedestrian should be before they
                                can (a) interact with a goal or (b) start
                                planning to go to another path point.</p></dd>


</dl><p>Arguments that handle feedback during the simulation.</p><dl><dt><code>plot_live</code>:</dt>
<dd><p>Whether to make these plots.</p></dd>

    <dt><code>plot_time</code>:</dt>
<dd><p>How much time to leave between the plotting of
                             each state.</p></dd>

    <dt><code>report</code>:</dt>
<dd><p>Whether to report whenever agents are reorienting.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>simulate.state</code>,
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a setting in which to simulate. Note that this setting also serves</span></span></span>
<span class="r-in"><span><span class="co"># as an example of one-directional flow, which can be seen if you let the</span></span></span>
<span class="r-in"><span><span class="co"># simulation run a bit longer.</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                     size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            limited_access <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a model from which to simulate</span></span></span>
<span class="r-in"><span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="predped-class.html">predped</a></span><span class="op">(</span>setting <span class="op">=</span> <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                    archetypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BaselineEuropean"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Do the simulation for maximally 2 agents</span></span></span>
<span class="r-in"><span><span class="va">trace</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></span><span class="op">(</span><span class="va">my_model</span>,</span></span>
<span class="r-in"><span>                  max_agents <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                  iterations <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                  add_agent_after <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Precomputing edgesYour model: model kpmlg is being simulated           </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check some interesting statistics, such as the length of the trace and the</span></span></span>
<span class="r-in"><span><span class="co"># number of agents in the room.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">trace</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 11</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">trace</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">agents</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0 1 1 1 1 1 1 1 1 1 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you wish to plot the trace, you can simply use the plot function.</span></span></span>
<span class="r-in"><span><span class="va">plt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">trace</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Making plot for state 0Making plot for state 1Making plot for state 2Making plot for state 3Making plot for state 4Making plot for state 5Making plot for state 6Making plot for state 7Making plot for state 8Making plot for state 9Making plot for state 10</span>
<span class="r-in"><span><span class="va">plt</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-plt img"><img src="simulate-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

