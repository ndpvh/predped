<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add motion variables to data — add_motion_variables • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add motion variables to data — add_motion_variables"><meta name="description" content="This function adds several motion variables to an already existing dataset.
These motion variables are then used by predped to compute utilities,
allowing for estimations in the long run. The variables that are added are
speed, orientation, and the cell to which a person moved (as defined by the
M4MA)."><meta property="og:description" content="This function adds several motion variables to an already existing dataset.
These motion variables are then used by predped to compute utilities,
allowing for estimations in the long run. The variables that are added are
speed, orientation, and the cell to which a person moved (as defined by the
M4MA)."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add motion variables to data</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/data.R"><code>R/data.R</code></a></small>
      <div class="d-none name"><code>add_motion_variables.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function adds several motion variables to an already existing dataset.
These motion variables are then used by <code>predped</code> to compute utilities,
allowing for estimations in the long run. The variables that are added are
speed, orientation, and the cell to which a person moved (as defined by the
M4MA).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_motion_variables</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  velocities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  orientations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">72.5</span>, <span class="fl">50</span>, <span class="fl">32.5</span>, <span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">72.5</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">32.5</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>  time_step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">qlnorm</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="op">-</span><span class="fl">2.95</span>, <span class="fl">0.64</span><span class="op">)</span><span class="op">/</span><span class="va">time_step</span>,</span>
<span>  initial_conditions <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Instance of a data.frame containing the data you want to transform.</p></dd>


<dt id="arg-velocities">velocities<a class="anchor" aria-label="anchor" href="#arg-velocities"></a></dt>
<dd><p>Numeric vector denoting the changes in speeds as assumed by
the M4MA. Defaults to <code>1.5</code> (acceleration), <code>1</code>, and <code>0.5</code>
(deceleration).</p></dd>


<dt id="arg-orientations">orientations<a class="anchor" aria-label="anchor" href="#arg-orientations"></a></dt>
<dd><p>Numeric vector denoting the changes in orientation as
assumed by the M4MA. Defaults to <code>72.5</code>, <code>50</code>, <code>32.5</code>,
<code>20</code>, <code>10</code>, <code>0</code>, <code>350</code>, <code>340</code>, <code>327.5</code>,
<code>310</code>, <code>287.5</code> (note that the larger angles are actually the
negative symmetric versions of the smaller angles).</p></dd>


<dt id="arg-time-step">time_step<a class="anchor" aria-label="anchor" href="#arg-time-step"></a></dt>
<dd><p>Numeric denoting the time between each iteration. Defaults
to <code>0.5</code> (the same as in <code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code>).</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>Numeric denoting under which observed value for speed the
cell to which an agent has moved should be put to `0`. Defaults to a value
based on the observed measurement error in our system.</p></dd>


<dt id="arg-initial-conditions">initial_conditions<a class="anchor" aria-label="anchor" href="#arg-initial-conditions"></a></dt>
<dd><p>Logical denoting whether the added columns should
include the initial conditions (that is, speed, orientation, and position at
the previous time point) alongside their current alternatives. Useful when
one wants to compute the values of the utility-related variables from the
data. Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The provided dataset should at least have the following columns:
 - <code>x</code>, <code>y</code>: Coordinates at which a person was standing at a given
   time
 - <code>time</code>: A continuous variable that denotes the time at which the
   measurement took place.
 - <code>id</code>: The identifier given to the person whose position was measured.
 - <code>goal_id</code>: The identifier given to the goal the person had to move
   towards while their position was being measured.
 - <code>goal_x</code>, <code>goal_y</code>: The position of the goal the person had to
   move to while their position was being measured.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This is my example</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

