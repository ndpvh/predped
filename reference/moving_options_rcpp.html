<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check where an object can be moved to — moving_options_rcpp • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check where an object can be moved to — moving_options_rcpp"><meta name="description" content="Rcpp alternative to moving_options. This method checks
where an object can be moved to. It returns a logical matrix that codes
TRUE for the cells that are available and FALSE for those that
aren't."><meta property="og:description" content="Rcpp alternative to moving_options. This method checks
where an object can be moved to. It returns a logical matrix that codes
TRUE for the cells that are available and FALSE for those that
aren't."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check where an object can be moved to</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/RcppExports.R"><code>R/RcppExports.R</code></a></small>
      <div class="d-none name"><code>moving_options_rcpp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Rcpp alternative to <code><a href="moving_options.html">moving_options</a></code>. This method checks
where an object can be moved to. It returns a logical matrix that codes
<code>TRUE</code> for the cells that are available and <code>FALSE</code> for those that
aren't.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">moving_options_rcpp</span><span class="op">(</span><span class="va">agent</span>, <span class="va">state</span>, <span class="va">background</span>, <span class="va">centers</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-agent">agent<a class="anchor" aria-label="anchor" href="#arg-agent"></a></dt>
<dd><p>Object of the <code><a href="agent-class.html">agent-class</a></code> or the
<code><a href="object-class.html">object-class</a></code> (latter not yet supported).</p></dd>


<dt id="arg-state">state<a class="anchor" aria-label="anchor" href="#arg-state"></a></dt>
<dd><p>Object of the <code><a href="state-class.html">state-class</a></code> containing the
current state.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Object of the <code><a href="background-class.html">background-class</a></code>.</p></dd>


<dt id="arg-centers">centers<a class="anchor" aria-label="anchor" href="#arg-centers"></a></dt>
<dd><p>Numerical matrix containing the coordinates at each position
the object can be moved to. Should have one row for each cell.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Logical matrix containing availabilities of the centers.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In general, this method works as follows. First, it checks whether any of the
provided cell centers are freely available, in the sense that they are not
contained inside any objects or fall outside of the setting. This is a crude
measure of whether a particular spot is available and is handled by the
<code><a href="https://rdrr.io/pkg/m4ma/man/free_cells_rcpp.html" class="external-link">free_cells_rcpp</a></code> function of the <code>m4ma</code> package.</p>
<p>Second, we check whether the object itself can be moved to this space, or
whether it would intersect with any of the objects and/or the outline of the
setting. This is a more direct measure of availability, as it doesn't only
account for whether a specific spot can be reached theoretically, but also
accounts for the size of the object that is being moved there. This is
handled by the <code><a href="overlap_with_objects.html">overlap_with_objects</a></code> function in
<code>predped</code>.</p>
<p>Finally, if the object is an instance of the <code><a href="agent-class.html">agent-class</a></code>,
we also check whether the agent can still see there current goal or path-point
when they move to the open spots. They will not move to the spots from which
they cannot see their goal/path-point. This is handled by the
<code><a href="https://rdrr.io/pkg/m4ma/man/seesGoalOK_rcpp.html" class="external-link">seesGoalOK_rcpp</a></code> function in the <code>m4ma</code> package.</p>
<p>WARNING: Due to its reliance on the <code>m4ma</code> package, centers needs to be
of length 33 x 2. This corresponds to the 3 (change in speed) x 11
(change in orientation) options that are inherent to M4MA.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="agent-class.html">agent-class</a></code>,
<code><a href="background-class.html">background-class</a></code>,
<code><a href="object-class.html">object-class</a></code>,
<code><a href="state-class.html">state-class</a></code>,
<code><a href="overlap_with_objects.html">overlap_with_objects</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Initialize all objects that you need</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="circle-class.html">circle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  radius <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="agent-class.html">agent</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.75</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  radius <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                  speed <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  orientation <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  current_goal <span class="op">=</span> <span class="fu"><a href="goal-class.html">goal</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                      path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="state-class.html">state</a></span><span class="op">(</span>iteration <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  setting <span class="op">=</span> <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                  agents <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate several locations the agent can move to</span></span></span>
<span class="r-in"><span><span class="va">centers</span> <span class="op">&lt;-</span> <span class="fu">m4ma</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/m4ma/man/c_vd_rcpp.html" class="external-link">c_vd_r</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">33</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="position.html">position</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="speed.html">speed</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="orientation.html">orientation</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use moving_options to see which of these possibilities is sound</span></span></span>
<span class="r-in"><span><span class="fu"><a href="moving_options.html">moving_options</a></span><span class="op">(</span><span class="va">my_agent</span>,</span></span>
<span class="r-in"><span>               <span class="va">my_state</span>,</span></span>
<span class="r-in"><span>               <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>               <span class="va">centers</span>,</span></span>
<span class="r-in"><span>               cpp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] FALSE FALSE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]  TRUE  TRUE TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

