<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check where an object can be moved to — moving_options • predped</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check where an object can be moved to — moving_options"><meta property="og:description" content="This method checks where an object can be moved to. It returns a logical
matrix that codes TRUE for the cells that are available and
FALSE for those that aren't."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar- navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">predped</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Usage

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/m4ma.html">M4MA</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Workflow</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Advanced Simulation</a>
    </li>
    <li>
      <a href="../articles/estimation.html">Estimation</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ndpvh/predped/">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check where an object can be moved to</h1>
    <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/moving_options.R"><code>R/moving_options.R</code></a></small>
    <div class="hidden name"><code>moving_options.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This method checks where an object can be moved to. It returns a logical
matrix that codes <code>TRUE</code> for the cells that are available and
<code>FALSE</code> for those that aren't.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">moving_options</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'agent'</span></span>
<span><span class="fu">moving_options</span><span class="op">(</span><span class="va">object</span>, <span class="va">state</span>, <span class="va">background</span>, <span class="va">centers</span>, cpp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object of the <code><a href="agent-class.html">agent-class</a></code> or the
<code><a href="object-class.html">object-class</a></code> (latter not yet supported).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to the methods of this generic</p></dd>


<dt id="arg-state">state<a class="anchor" aria-label="anchor" href="#arg-state"></a></dt>
<dd><p>Object of the <code><a href="state-class.html">state-class</a></code> containing the
current state.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Object of the <code><a href="background-class.html">background-class</a></code>.</p></dd>


<dt id="arg-centers">centers<a class="anchor" aria-label="anchor" href="#arg-centers"></a></dt>
<dd><p>Numerical matrix containing the coordinates at each position
the object can be moved to. Should have one row for each cell.</p></dd>


<dt id="arg-cpp">cpp<a class="anchor" aria-label="anchor" href="#arg-cpp"></a></dt>
<dd><p>Logical denoting whether to use the Rcpp alternative (<code>TRUE</code>)
or the R alternative of this function (<code>FALSE</code>). Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Logical matrix containing availabilities of the centers.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>In general, this method works as follows. First, it checks whether any of the
provided cell centers are freely available, in the sense that they are not
contained inside any objects or fall outside of the setting. This is a crude
measure of whether a particular spot is available and is handled by the
<code><a href="https://rdrr.io/pkg/m4ma/man/free_cells_rcpp.html" class="external-link">free_cells_rcpp</a></code> function of the <code>m4ma</code> package.</p>
<p>Second, we check whether the object itself can be moved to this space, or
whether it would intersect with any of the objects and/or the outline of the
setting. This is a more direct measure of availability, as it doesn't only
account for whether a specific spot can be reached theoretically, but also
accounts for the size of the object that is being moved there. This is
handled by the <code><a href="overlap_with_objects.html">overlap_with_objects</a></code> function in
<code>predped</code>.</p>
<p>Finally, if the object is an instance of the <code><a href="agent-class.html">agent-class</a></code>,
we also check whether the agent can still see there current goal or path-point
when they move to the open spots. They will not move to the spots from which
they cannot see their goal/path-point. This is handled by the
<code><a href="https://rdrr.io/pkg/m4ma/man/seesGoalOK_rcpp.html" class="external-link">seesGoalOK_rcpp</a></code> function in the <code>m4ma</code> package.</p>
<p>WARNING: Due to its reliance on the <code>m4ma</code> package, centers needs to be
of length 33 x 2. This corresponds to the 3 (change in speed) x 11
(change in orientation) options that are inherent to M4MA.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="agent-class.html">agent-class</a></code>,
<code><a href="background-class.html">background-class</a></code>,
<code><a href="object-class.html">object-class</a></code>,
<code><a href="state-class.html">state-class</a></code>,
<code><a href="overlap_with_objects.html">overlap_with_objects</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Initialize all objects that you need</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="circle-class.html">circle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  radius <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="agent-class.html">agent</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.75</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  radius <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                  speed <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  orientation <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  current_goal <span class="op">=</span> <span class="fu"><a href="goal-class.html">goal</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                      path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="state-class.html">state</a></span><span class="op">(</span>iteration <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  setting <span class="op">=</span> <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                  agents <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate several locations the agent can move to</span></span></span>
<span class="r-in"><span><span class="va">centers</span> <span class="op">&lt;-</span> <span class="fu"><a href="compute_centers.html">compute_centers</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use moving_options to see which of these possibilities is sound</span></span></span>
<span class="r-in"><span><span class="fu">moving_options</span><span class="op">(</span><span class="va">my_agent</span>,</span></span>
<span class="r-in"><span>               <span class="va">my_state</span>,</span></span>
<span class="r-in"><span>               <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>               <span class="va">centers</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] FALSE FALSE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]  TRUE  TRUE TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

