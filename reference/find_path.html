<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find path to a goal — find_path • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find path to a goal — find_path"><meta name="description" content="Creates a numerical matrix of coordinates which contain the path points that
the agent will use to move towards a goal. It thus finds itself on the
strategic level (when performed in an initial planning phase) and the tactical
level (when performed in response to blockages)."><meta property="og:description" content="Creates a numerical matrix of coordinates which contain the path points that
the agent will use to move towards a goal. It thus finds itself on the
strategic level (when performed in an initial planning phase) and the tactical
level (when performed in response to blockages)."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Find path to a goal</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/goals.R"><code>R/goals.R</code></a></small>
      <div class="d-none name"><code>find_path.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a numerical matrix of coordinates which contain the path points that
the agent will use to move towards a goal. It thus finds itself on the
strategic level (when performed in an initial planning phase) and the tactical
level (when performed in response to blockages).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">find_path</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'goal'</span></span>
<span><span class="fu">find_path</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">agent</span>,</span>
<span>  <span class="va">background</span>,</span>
<span>  space_between <span class="op">=</span> <span class="fu"><a href="radius.html">radius</a></span><span class="op">(</span><span class="va">agent</span><span class="op">)</span>,</span>
<span>  many_nodes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="st">"Dijkstra"</span>,</span>
<span>  precomputed_edges <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_objects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reevaluate <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object of <code><a href="goal-class.html">goal-class</a></code> for which the path
should be computed.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to the methods of this generic</p></dd>


<dt id="arg-agent">agent<a class="anchor" aria-label="anchor" href="#arg-agent"></a></dt>
<dd><p>Object of <code><a href="agent-class.html">agent-class</a></code> who wants to move
towards the goal defined in argument <code>object</code>.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Object of <code><a href="background-class.html">background-class</a></code> within
which the goal and agent are contained.</p></dd>


<dt id="arg-space-between">space_between<a class="anchor" aria-label="anchor" href="#arg-space-between"></a></dt>
<dd><p>Numeric denoting the amount of space to leave between
an object and a path point. Within this function, the default is the radius
of the agent that is provided. However, in the <code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code>
function, this default is overwritten to be equal to <code>2.5</code> times this
radius.</p></dd>


<dt id="arg-many-nodes">many_nodes<a class="anchor" aria-label="anchor" href="#arg-many-nodes"></a></dt>
<dd><p>Logical denoting whether to create many nodes or leave
it at the minimum. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-algorithm">algorithm<a class="anchor" aria-label="anchor" href="#arg-algorithm"></a></dt>
<dd><p>Character denoting the algorithm to be used for optimizing
the path towards the goal. Is provided to the
<code><a href="https://rdrr.io/pkg/cppRouting/man/get_path_pair.html" class="external-link">get_path_pair</a></code> function in the <code>cppRouting</code>
package. Defaults to <code>"Dijkstra"</code>. Note that one-way routing as
controlled by the <code>limited_access</code> slot in the <code>background</code> may not
work if a bidirectional algorithm is used.</p></dd>


<dt id="arg-precomputed-edges">precomputed_edges<a class="anchor" aria-label="anchor" href="#arg-precomputed-edges"></a></dt>
<dd><p>List containing the network of nodes and edges
for the environment, as created by <code><a href="compute_edges.html">compute_edges</a></code>.
Defaults to <code>NULL</code>, triggering the creation of these edges again.</p></dd>


<dt id="arg-new-objects">new_objects<a class="anchor" aria-label="anchor" href="#arg-new-objects"></a></dt>
<dd><p>List of instances of <code><a href="object-class.html">object-class</a></code>
that are not yet contained in the <code>objects</code> slot in the argument
<code>background</code>. Usually consists of other agents that the <code>agent</code>
has to account for when planning their route. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-reevaluate">reevaluate<a class="anchor" aria-label="anchor" href="#arg-reevaluate"></a></dt>
<dd><p>Logical denoting whether to reevaluate the network that is
provided in <code>precomputed_edges</code>. Is useful whenever <code>new_objects</code>
is not <code>NULL</code>, allowing us to check whether some nodes and edges are now
occluded by the new objects. Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Numerical matrix of coordinates representing the path points the
agent will have to move to to reach the goal.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Creates a numerical matrix containing coordinates of path points which,
together, form a strategic path to the goal specified in this function. This
forms one of the functions that operate on the strategic and tactical level
of the model.</p>
<p>To create this path, the function takes the following approach. First, it
will create a network of nodes that are connected through unidirectional
edges, as created by the <code><a href="create_edges.html">create_edges</a></code> function.
Nodes are created based on the objects in the environment, so that the nodes
are always strategically placed at a certain distance away from the objects
in the environment (at a distance <code>space_between</code>). If the argument
<code>many_nodes = TRUE</code>, then a grid of other nodes are added to this
list of initial nodes. This grid consists of nodes that are placed at an
equal distance apart in the x- and y-direction, and spans 20 rows and 20
columns. Once the nodes have been generated, those nodes that fall within
any of the objects in the environment or falls outside of the environment
are deleted. Unidirectional edges connect the different nodes and are
similarly pruned based on intersections with objects or, when defined,
intersections with instances of the <code><a href="segment-class.html">segment-class</a></code>.</p>
<p>Once the network of nodes and edges has been created, we translate this
network into a graph that can be used by the <code>ccpRouting</code> package.
Specifically, we use <code><a href="https://rdrr.io/pkg/cppRouting/man/makegraph.html" class="external-link">makegraph</a></code> for this purpose.
We then use the <code><a href="https://rdrr.io/pkg/cppRouting/man/get_path_pair.html" class="external-link">get_path_pair</a></code> function of the
<code>cppRouting</code> package to find the shortest route to the goal. The user
can specify which algorithm to use for this optimization through the argument
<code>algorithm</code>, but the algorithm should be unidirectional to ensure that
one-way walking can be enforced (as controlled through the <code>limited_access</code>
slot in the <code><a href="background-class.html">background-class</a></code>).</p>
<p>Finally, the optimal path is checked for any redundancy and formatted so that
the path points are contained in an n x 2 matrix.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="agent-class.html">agent-class</a></code>
<code><a href="background-class.html">background-class</a></code>
<code><a href="goal-class.html">goal-class</a></code>
<code><a href="object-class.html">object-class</a></code>
<code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code>
<code><a href="adjust_edges.html">adjust_edges</a></code>
<code><a href="compute_edges.html">compute_edges</a></code>
<code><a href="create_edges.html">create_edges</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a setting</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="circle-class.html">circle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                                  radius <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an agent that is walking around there and a goal that the agent </span></span></span>
<span class="r-in"><span><span class="co"># will move to</span></span></span>
<span class="r-in"><span><span class="va">my_goal</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_goal.html">add_goal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">objects</a></span><span class="op">(</span><span class="va">my_background</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">my_background</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="agent-class.html">agent</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.7</span><span class="op">)</span>, radius <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find the path of the agent to his goal</span></span></span>
<span class="r-in"><span><span class="fu">find_path</span><span class="op">(</span><span class="va">my_goal</span>, </span></span>
<span class="r-in"><span>          <span class="va">my_agent</span>,</span></span>
<span class="r-in"><span>          <span class="va">my_background</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              x         y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -0.205821 0.4666237</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

