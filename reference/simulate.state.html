<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate a single state for the M4MA — simulate,state-method • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate a single state for the M4MA — simulate,state-method"><meta name="description" content="This function allows users to simulate a single state from the M4MA based on
a single previous state."><meta property="og:description" content="This function allows users to simulate a single state from the M4MA based on
a single previous state."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate a single state for the M4MA</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/simulate.R"><code>R/simulate.R</code></a></small>
      <div class="d-none name"><code>simulate.state.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows users to simulate a single state from the M4MA based on
a single previous state.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'state'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_agent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  velocities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">11</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  orientations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">72.5</span>, <span class="fl">50</span>, <span class="fl">32.5</span>, <span class="fl">20</span>, <span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">350</span>, <span class="fl">340</span>, <span class="fl">327.5</span>, <span class="fl">310</span>, <span class="fl">287.5</span><span class="op">)</span>,</span>
<span>    times <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  standing_start <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  close_enough <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  space_between <span class="op">=</span> <span class="fl">1.25</span>,</span>
<span>  stay_stopped <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  precomputed_edges <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  many_nodes <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">precomputed_edges</span><span class="op">)</span>,</span>
<span>  plot_live <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot_time <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  report <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print_iteration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  step_report <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  goal_number <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  goal_duration <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  precompute_goal_paths <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sort_goals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  adaptive_goal_sorting <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  precomputed_goals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  middle_edge <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  individual_differences <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cpp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object of the <code><a href="state-class.html">state-class</a></code>.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>Object of the <code><a href="predped-class.html">predped-class</a></code>.</p></dd>


<dt id="arg-add-agent">add_agent<a class="anchor" aria-label="anchor" href="#arg-add-agent"></a></dt>
<dd><p>Logical denoting whether an agent should be added to the
simulation. Defaults to <code>FALSE</code> and is typically handled by the
<code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code> function, where it accounts for the
variables <code>add_agent_after</code> and <code>max_agents</code>.</p></dd>


<dt id="arg-group-size">group_size<a class="anchor" aria-label="anchor" href="#arg-group-size"></a></dt>
<dd><p>Numeric matrix with two columns where the first column
denotes the number of people in a social group and the second column the
probability with which such a group is added to the simulation. Defaults to
a 100% probability that individuals are added to the simulation (i.e., no
social groups).</p></dd>


<dt id="arg-velocities">velocities<a class="anchor" aria-label="anchor" href="#arg-velocities"></a></dt>
<dd><p>Numeric matrix containing the change in speed for an agent
whenever they move to the respective cell of this matrix. Is used to create
the cell positions that the agent might move to. Defaults to a matrix in
which the columns contain <code>1.5</code> (acceleration), <code>1</code>, and <code>0.5</code>.</p></dd>


<dt id="arg-orientations">orientations<a class="anchor" aria-label="anchor" href="#arg-orientations"></a></dt>
<dd><p>Numeric matrix containing the change in direction for an
agent whenever they move to the respective cell of this matrix. Is used to
create the cell positions that the agent might move to. Defaults to a matrix
in which the rows contain <code>72.5</code>, <code>50</code>, <code>32.5</code>, <code>20</code>,
<code>10</code>, <code>0</code>, <code>350</code>, <code>340</code>, <code>327.5</code>, <code>310</code>,
<code>287.5</code> (note that the larger angles are actually the negative symmetric
versions of the smaller angles).</p></dd>


<dt id="arg-standing-start">standing_start<a class="anchor" aria-label="anchor" href="#arg-standing-start"></a></dt>
<dd><p>Numeric denoting the factor of their preferred speed
that agents move when they just came from standing still. Defaults to
<code>0.1</code>.</p></dd>


<dt id="arg-close-enough">close_enough<a class="anchor" aria-label="anchor" href="#arg-close-enough"></a></dt>
<dd><p>Numeric denoting how close (in radii) the agent needs to
be to an object in order to interact with it. Defaults to <code>2</code>, meaning the
agent can interact with objects at <code>2 * radius(agent)</code> distance away.</p></dd>


<dt id="arg-space-between">space_between<a class="anchor" aria-label="anchor" href="#arg-space-between"></a></dt>
<dd><p>Numeric denoting the space that should be left between
an object and the created path points for the agents (in radii). Defaults to
<code>2.5</code>, meaning a space of <code>2.5 * radius(agent)</code> is left between an
object and the path points agents use in their strategy.</p></dd>


<dt id="arg-stay-stopped">stay_stopped<a class="anchor" aria-label="anchor" href="#arg-stay-stopped"></a></dt>
<dd><p>Logical denoting whether agents will predict others that
are currently not moving to remain immobile in the next iteration. Defaults
to <code>TRUE</code>.</p></dd>


<dt id="arg-time-step">time_step<a class="anchor" aria-label="anchor" href="#arg-time-step"></a></dt>
<dd><p>Numeric denoting the number of seconds each discrete step in
time should mimic. Defaults to <code>0.5</code>, or half a second.</p></dd>


<dt id="arg-precomputed-edges">precomputed_edges<a class="anchor" aria-label="anchor" href="#arg-precomputed-edges"></a></dt>
<dd><p>Output of <code><a href="compute_edges.html">compute_edges</a></code>
containing the nodes and edges the agent can use to plan its path. Defauls
to <code>NULL</code>, triggering the creation of these edges whenever they are
needed.</p></dd>


<dt id="arg-many-nodes">many_nodes<a class="anchor" aria-label="anchor" href="#arg-many-nodes"></a></dt>
<dd><p>Logical denoting whether to use the minimal number of nodes
or to use many more (see <code><a href="create_edges.html">create_edges</a></code>). Ignored if
<code>precomputed_edges</code> is provided. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-plot-live">plot_live<a class="anchor" aria-label="anchor" href="#arg-plot-live"></a></dt>
<dd><p>Logical denoting whether to plot each iteration while the
simulation is going on. Defaults to `FALSE`.</p></dd>


<dt id="arg-plot-time">plot_time<a class="anchor" aria-label="anchor" href="#arg-plot-time"></a></dt>
<dd><p>Numeric denoting the amount of time (in seconds) to wait
between iterations, i.e., the time between updating the plot. Defaults to
`0.2`.</p></dd>


<dt id="arg-report">report<a class="anchor" aria-label="anchor" href="#arg-report"></a></dt>
<dd><p>Logical denoting whether to report whenever an agent is
reorienting. Defaults to <code>FALSE</code>, and is usually not needed as feedback.</p></dd>


<dt id="arg-print-iteration">print_iteration<a class="anchor" aria-label="anchor" href="#arg-print-iteration"></a></dt>
<dd><p>Logical denoting whether to report each simulated
iteration. Defaults to <code>FALSE</code>, but can be switched off if desired.</p></dd>


<dt id="arg-step-report">step_report<a class="anchor" aria-label="anchor" href="#arg-step-report"></a></dt>
<dd><p>Numeric denoting at which iteration to report the
current iteration in the simulation &amp; the number of agents present
at the current iteration in the simulation. Defaults to 1, which
represents each iteration to be reported.</p></dd>


<dt id="arg-goal-number">goal_number<a class="anchor" aria-label="anchor" href="#arg-goal-number"></a></dt>
<dd><p>Numeric, vector, or function that defines the number of
goals the agents should accomplish. It's exact value is handled by
<code><a href="determine_values.html">determine_values</a></code>. Defaults to <code>\(n) rnorm(n, 10, 2)</code>.</p></dd>


<dt id="arg-goal-duration">goal_duration<a class="anchor" aria-label="anchor" href="#arg-goal-duration"></a></dt>
<dd><p>Numeric, vector, or function that defines the duration of
the goals of the agents. Defaults to <code>\(n) rnorm(n, 10, 2)</code>.</p></dd>


<dt id="arg-precompute-goal-paths">precompute_goal_paths<a class="anchor" aria-label="anchor" href="#arg-precompute-goal-paths"></a></dt>
<dd><p>Logical denoting whether to run the
<code><a href="find_path.html">find_path</a></code> for each of the generated goals
beforehand. Assumes that the agent does all of the goals in the order of the
goal stack. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-sort-goals">sort_goals<a class="anchor" aria-label="anchor" href="#arg-sort-goals"></a></dt>
<dd><p>Logical denoting whether to order the goal stack in a logical
way. Currently implemented in the following way. First, we select the first
goal as being the one that is closest by the starting position provided in
the argument <code>starting_position</code>. Then, we define each of the next goals
as being the one that is closest to the position of the previous goal.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-adaptive-goal-sorting">adaptive_goal_sorting<a class="anchor" aria-label="anchor" href="#arg-adaptive-goal-sorting"></a></dt>
<dd><p>Logical denoting whether agents have the ability
to change the order of their goals adaptively throughout the simulation.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-precomputed-goals">precomputed_goals<a class="anchor" aria-label="anchor" href="#arg-precomputed-goals"></a></dt>
<dd><p>List of goal stacks from which the agent can be
assigned one. Defaults to <code>NULL</code>, triggering the creation of goal stacks
in the simulation.</p></dd>


<dt id="arg-middle-edge">middle_edge<a class="anchor" aria-label="anchor" href="#arg-middle-edge"></a></dt>
<dd><p>Logical denoting whether to sample the goals from the
middle of the edge of the objects in the <code>link[predped]{background-class}</code>
(<code>TRUE</code>) or to allow the goal locations to fall on all points on these
edges (<code>FALSE</code>). Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-position">position<a class="anchor" aria-label="anchor" href="#arg-position"></a></dt>
<dd><p>Numeric denoting the position you would like to assign to an
agent if they are added to the simulation. Defaults to <code>NULL</code>, making
the agent start at the entrance. Note that this is an experimental feature
that has not been tested yet, and therefore might not work for the moment.</p></dd>


<dt id="arg-individual-differences">individual_differences<a class="anchor" aria-label="anchor" href="#arg-individual-differences"></a></dt>
<dd><p>Logical denoting whether to use the standard
deviations in the parameter list to create some variation in the parameters.
Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-cpp">cpp<a class="anchor" aria-label="anchor" href="#arg-cpp"></a></dt>
<dd><p>Logical denoting whether to use the Rcpp alternatives for several
of the lower-level functions (<code>TRUE</code>) or whether to use the R alternatives
instead (<code>FALSE</code>). Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></code> method (if
<code>plot_live = TRUE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Object of the <code><a href="state-class.html">state-class</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Heavily depends on <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></code>.</p>
<p>Many of the arguments here are either shared or derived from the upper-level
<code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code> function. Please refer to the
Details in its documentation to see a breakdown of the most important
arguments.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="predped-class.html">predped-class</a></code>,
<code><a href="state-class.html">state-class</a></code>,
<code><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></code>,
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a setting in which to simulate. Note that this setting also serves</span></span></span>
<span class="r-in"><span><span class="co"># as an example of one-directional flow, which can be seen if you let the</span></span></span>
<span class="r-in"><span><span class="co"># simulation run a bit longer.</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                     size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            limited_access <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  <span class="fu"><a href="segment-class.html">segment</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                          to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a model from which to simulate</span></span></span>
<span class="r-in"><span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="predped-class.html">predped</a></span><span class="op">(</span>setting <span class="op">=</span> <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                    archetypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BaselineEuropean"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an initial state with no agents in it</span></span></span>
<span class="r-in"><span><span class="va">my_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="state-class.html">state</a></span><span class="op">(</span>iteration <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  setting <span class="op">=</span> <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                  agents <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate the next state</span></span></span>
<span class="r-in"><span><span class="va">next_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/simulate.html" class="external-link">simulate</a></span><span class="op">(</span><span class="va">my_state</span>,</span></span>
<span class="r-in"><span>                       model <span class="op">=</span> <span class="va">my_model</span>,</span></span>
<span class="r-in"><span>                       add_agent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check the number of agents in the next state</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">next_state</span><span class="op">@</span><span class="va">agents</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you wish to plot the new state, you can use the plot function.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">next_state</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="simulate.state-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

