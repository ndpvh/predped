<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check agent and object overlap — overlap_with_objects_rcpp • predped</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check agent and object overlap — overlap_with_objects_rcpp"><meta property="og:description" content="Rcpp alternative to overlap_with_objects."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar- navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">predped</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Usage

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/m4ma.html">M4MA</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Workflow</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Advanced Simulation</a>
    </li>
    <li>
      <a href="../articles/estimation.html">Estimation</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ndpvh/predped/">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check agent and object overlap</h1>
    <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/RcppExports.R"><code>R/RcppExports.R</code></a></small>
    <div class="hidden name"><code>overlap_with_objects_rcpp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Rcpp alternative to <code><a href="overlap_with_objects.html">overlap_with_objects</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">overlap_with_objects_rcpp</span><span class="op">(</span></span>
<span>  <span class="va">agent</span>,</span>
<span>  <span class="va">background</span>,</span>
<span>  <span class="va">centers</span>,</span>
<span>  <span class="va">check</span>,</span>
<span>  space_between <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-agent">agent<a class="anchor" aria-label="anchor" href="#arg-agent"></a></dt>
<dd><p>Object of the <code><a href="agent-class.html">agent-class</a></code>.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Object of the <code><a href="background-class.html">background-class</a></code>.</p></dd>


<dt id="arg-centers">centers<a class="anchor" aria-label="anchor" href="#arg-centers"></a></dt>
<dd><p>Numerical matrix containing the coordinates at each position
the object can be moved to. Should have one row for each cell.</p></dd>


<dt id="arg-check">check<a class="anchor" aria-label="anchor" href="#arg-check"></a></dt>
<dd><p>Logical matrix of dimensions 11 x 3 denoting whether an agent
can move to a given cell (<code>TRUE</code>) or not (<code>FALSE</code>).</p></dd>


<dt id="arg-space-between">space_between<a class="anchor" aria-label="anchor" href="#arg-space-between"></a></dt>
<dd><p>Numeric denoting the space to leave between the nodes
put on the circumference of the objects in the space (used for checking the
overlap with an agent). Defaults to <code>0.05</code> or 5cm.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Logical matrix containing availabilities of the centers (<code>TRUE</code>
if available, <code>FALSE</code> if not).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function checks whether there is an overlap between a given agent and
the objects in the environment, provided that the agent would move to the
locations in <code>centers</code>. Returns a logical matrix as needed in
<code><a href="moving_options.html">moving_options</a></code>.</p>

<p>In this function, we can only approximately check the intersection of agent
and object. Specifically, we use the following method. First, we sample
nodes on the circumference of each of the objects in the setting that is
provided to this function. For this, we depend on the function
<code><a href="nodes_on_circumference.html">nodes_on_circumference</a></code> and we currently take these
nodes to be 5cm.</p>
<p>In the next step, we bind all these coordinates together in a single matrix.
This matrix thus consists of nodes that should not be embedded in the agents:
Whenever one of these points is included in the agents, we can conclude that
the agents and objects intersect. [Note, however, that if these points are
not included in the agents, that we cannot with certainty conclude that agent
and object do not intersect]</p>
<p>This check is then performed by looping over all the centers, changing the
agents position to the position of this center, and using the
<code><a href="in_object.html">in_object</a></code> to do the test. This is a vectorized
test: For each position in <code>centers</code> we have a logical <code>TRUE</code> or
<code>FALSE</code> for each of the nodes in the coordinate matrix, resulting in a
logical matrix with an equal number of rows as <code>centers</code> and an equal
number of columns as nodes in the coordinate matrix. In a last step,
we aggregate over the columns in this matrix so that we have a single logical
for each center.</p>
<p>The reason why we use this approximate method is because of time efficiency.
Using the <code><a href="intersects.html">intersects</a></code> takes a longer time than
using the <code><a href="in_object.html">in_object</a></code>, especially as the number
of objects in the environment increases.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="agent-class.html">agent-class</a></code>,
<code><a href="background-class.html">background-class</a></code>,
<code><a href="in_object.html">in_object</a></code>,
<code><a href="intersects.html">intersects</a></code>,
<code><a href="moving_options.html">moving_options</a></code>,
<code><a href="nodes_on_circumference.html">nodes_on_circumference</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Initialize all objects that you need</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="circle-class.html">circle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  radius <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="agent-class.html">agent</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.75</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  radius <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                  speed <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  orientation <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  current_goal <span class="op">=</span> <span class="fu"><a href="goal-class.html">goal</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate several locations the agent can move to</span></span></span>
<span class="r-in"><span><span class="va">centers</span> <span class="op">&lt;-</span> <span class="fu">m4ma</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/m4ma/man/c_vd_rcpp.html" class="external-link">c_vd_r</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">33</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="position.html">position</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="speed.html">speed</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="orientation.html">orientation</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">TRUE</span>, nrow <span class="op">=</span> <span class="fl">11</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use moving_options to see which of these possibilities is sound</span></span></span>
<span class="r-in"><span><span class="fu"><a href="overlap_with_objects.html">overlap_with_objects</a></span><span class="op">(</span><span class="va">my_agent</span>,</span></span>
<span class="r-in"><span>                     <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                     <span class="va">centers</span>,</span></span>
<span class="r-in"><span>                     <span class="va">check</span>,</span></span>
<span class="r-in"><span>                     cpp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] FALSE FALSE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]  TRUE  TRUE TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

