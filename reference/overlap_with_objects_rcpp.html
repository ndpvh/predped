<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check agent and object overlap — overlap_with_objects_rcpp • predped</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check agent and object overlap — overlap_with_objects_rcpp"><meta name="description" content="Rcpp alternative to overlap_with_objects."><meta property="og:description" content="Rcpp alternative to overlap_with_objects."><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">predped</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/m4ma.html">M4MA</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Advanced Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/estimation.html">Estimation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/ndpvh/predped/" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check agent and object overlap</h1>
      <small class="dont-index">Source: <a href="https://github.com/ndpvh/predped/tree/main/R/RcppExports.R"><code>R/RcppExports.R</code></a></small>
      <div class="d-none name"><code>overlap_with_objects_rcpp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Rcpp alternative to <code><a href="overlap_with_objects.html">overlap_with_objects</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">overlap_with_objects_rcpp</span><span class="op">(</span></span>
<span>  <span class="va">agent</span>,</span>
<span>  <span class="va">background</span>,</span>
<span>  <span class="va">centers</span>,</span>
<span>  <span class="va">check</span>,</span>
<span>  space_between <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-agent">agent<a class="anchor" aria-label="anchor" href="#arg-agent"></a></dt>
<dd><p>Object of the <code><a href="agent-class.html">agent-class</a></code>.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Object of the <code><a href="background-class.html">background-class</a></code>.</p></dd>


<dt id="arg-centers">centers<a class="anchor" aria-label="anchor" href="#arg-centers"></a></dt>
<dd><p>Numerical matrix containing the coordinates at each position
the object can be moved to. Should have one row for each cell.</p></dd>


<dt id="arg-check">check<a class="anchor" aria-label="anchor" href="#arg-check"></a></dt>
<dd><p>Logical matrix of dimensions 11 x 3 denoting whether an agent
can move to a given cell (<code>TRUE</code>) or not (<code>FALSE</code>).</p></dd>


<dt id="arg-space-between">space_between<a class="anchor" aria-label="anchor" href="#arg-space-between"></a></dt>
<dd><p>Numeric denoting the space to leave between the nodes
put on the circumference of the objects in the space (used for checking the
overlap with an agent). Defaults to <code>0.05</code> or 5cm.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Logical matrix containing availabilities of the centers (<code>TRUE</code>
if available, <code>FALSE</code> if not).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function checks whether there is an overlap between a given agent and
the objects in the environment, provided that the agent would move to the
locations in <code>centers</code>. Returns a logical matrix as needed in
<code><a href="moving_options.html">moving_options</a></code>.</p>

<p>In this function, we can only approximately check the intersection of agent
and object. Specifically, we use the following method. First, we sample
nodes on the circumference of each of the objects in the setting that is
provided to this function. For this, we depend on the function
<code><a href="nodes_on_circumference.html">nodes_on_circumference</a></code> and we currently take these
nodes to be 5cm.</p>
<p>In the next step, we bind all these coordinates together in a single matrix.
This matrix thus consists of nodes that should not be embedded in the agents:
Whenever one of these points is included in the agents, we can conclude that
the agents and objects intersect. [Note, however, that if these points are
not included in the agents, that we cannot with certainty conclude that agent
and object do not intersect]</p>
<p>This check is then performed by looping over all the centers, changing the
agents position to the position of this center, and using the
<code><a href="in_object.html">in_object</a></code> to do the test. This is a vectorized
test: For each position in <code>centers</code> we have a logical <code>TRUE</code> or
<code>FALSE</code> for each of the nodes in the coordinate matrix, resulting in a
logical matrix with an equal number of rows as <code>centers</code> and an equal
number of columns as nodes in the coordinate matrix. In a last step,
we aggregate over the columns in this matrix so that we have a single logical
for each center.</p>
<p>The reason why we use this approximate method is because of time efficiency.
Using the <code><a href="intersects.html">intersects</a></code> takes a longer time than
using the <code><a href="in_object.html">in_object</a></code>, especially as the number
of objects in the environment increases.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="agent-class.html">agent-class</a></code>,
<code><a href="background-class.html">background-class</a></code>,
<code><a href="in_object.html">in_object</a></code>,
<code><a href="intersects.html">intersects</a></code>,
<code><a href="moving_options.html">moving_options</a></code>,
<code><a href="nodes_on_circumference.html">nodes_on_circumference</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Initialize all objects that you need</span></span></span>
<span class="r-in"><span><span class="va">my_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="background-class.html">background</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="rectangle-class.html">rectangle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="circle-class.html">circle</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                  radius <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="agent-class.html">agent</a></span><span class="op">(</span>center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.75</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  radius <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                  speed <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                  orientation <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  current_goal <span class="op">=</span> <span class="fu"><a href="goal-class.html">goal</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                      path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.01</span>, <span class="fl">0</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate several locations the agent can move to</span></span></span>
<span class="r-in"><span><span class="va">centers</span> <span class="op">&lt;-</span> <span class="fu">m4ma</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/m4ma/man/c_vd_rcpp.html" class="external-link">c_vd_r</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">33</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="position.html">position</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="speed.html">speed</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="fu"><a href="orientation.html">orientation</a></span><span class="op">(</span><span class="va">my_agent</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">TRUE</span>, nrow <span class="op">=</span> <span class="fl">11</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use moving_options to see which of these possibilities is sound</span></span></span>
<span class="r-in"><span><span class="fu"><a href="overlap_with_objects.html">overlap_with_objects</a></span><span class="op">(</span><span class="va">my_agent</span>,</span></span>
<span class="r-in"><span>                     <span class="va">my_background</span>,</span></span>
<span class="r-in"><span>                     <span class="va">centers</span>,</span></span>
<span class="r-in"><span>                     <span class="va">check</span>,</span></span>
<span class="r-in"><span>                     cpp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] FALSE FALSE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] FALSE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  TRUE  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]  TRUE  TRUE TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ndpvh.github.io" class="external-link">Niels Vanhasbroeck</a>, <a href="https://www.ampl-psych.com/team/andrew-heathcote/" class="external-link">Andrew Heathcote</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

